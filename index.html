<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Free TikTok Video Downloader - Download TikTok videos without watermark in MP4 format. Fast, easy and works with all TikTok links.">
    <meta name="keywords" content="tiktok downloader, tiktok video downloader, tiktok to mp4, download tiktok videos, download tiktok video, tiktok mp4 download, save tiktok video, tiktok download without watermark">
    <meta name="author" content="TikTok Downloader">
    <title>TikTok Video Downloader - Download TikTok Videos Without Watermark</title>
    
    <!-- Structured Data for SEO -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "TikTok Video Downloader",
        "description": "Free TikTok Video Downloader - Download TikTok videos without watermark",
        "applicationCategory": "UtilityApplication",
        "operatingSystem": "Any",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [{
        "@type": "Question",
        "name": "How to download TikTok videos without watermark?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Simply paste the TikTok video URL in the input field and click the download button. Our tool will remove the watermark automatically."
        }
      }]
    }
    </script>

    <style>
        :root {
            --primary: #6a11cb;
            --secondary: #2575fc;
            --success: #00c853;
            --warning: #ffab00;
            --danger: #ff1744;
            --info: #2979ff;
            --dark: #121212;
            --light: #f8f9fa;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        body {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
            line-height: 1.6;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            color: #333;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        .subtitle {
            color: #666;
            font-size: 1.1rem;
            margin-bottom: 20px;
        }
        .api-test {
            background: #fff3cd;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-right: 4px solid var(--warning);
        }
        .server-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        .server-item {
            padding: 10px;
            background: white;
            border-radius: 8px;
            text-align: center;
            border: 2px solid #e0e0e0;
            transition: transform 0.3s ease;
        }
        .server-item:hover {
            transform: translateY(-5px);
        }
        .server-online {
            border-color: var(--success);
            background: #f0fff0;
        }
        .server-offline {
            border-color: var(--danger);
            background: #fff0f0;
        }
        .server-intermittent {
            border-color: var(--warning);
            background: #fffbf0;
        }
        #loading {
            display: none;
            text-align: center;
            margin: 20px 0;
        }
        #loading div {
            border: 5px solid rgba(106, 17, 203, 0.3);
            border-radius: 50%;
            border-top: 5px solid var(--primary);
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        #errorMessage {
            display: none;
            background: rgba(244, 67, 54, 0.1);
            padding: 15px;
            border-radius: 10px;
            color: var(--danger);
            border-right: 4px solid var(--danger);
        }
        #resultSection {
            display: none;
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin-top: 25px;
            text-align: center;
        }
        #videoPreview {
            width: 100%;
            max-width: 100%;
            border-radius: 10px;
            margin: 20px 0;
            background: #000;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        button {
            padding: 15px 25px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        button:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.2);
        }
        button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        #downloadBtn {
            background: var(--success);
        }
        .status-badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-top: 5px;
        }
        .status-active { background: var(--success); color: white; }
        .status-backup { background: var(--warning); color: black; }
        
        /* Backup section */
        .backup-section {
            background: #e3f2fd;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid var(--info);
        }
        
        /* Method indicator */
        .method-indicator {
            background: #e8f5e8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            text-align: center;
            font-size: 0.9rem;
        }
        
        /* Ad spaces */
        .ad-container {
            margin: 25px 0;
            text-align: center;
        }
        .ad-banner {
            width: 100%;
            max-width: 728px;
            height: 90px;
            background: #f0f0f0;
            margin: 0 auto;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #888;
            font-weight: bold;
            border: 2px dashed #ccc;
        }
        
        /* Features section */
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .feature-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }
        
        /* FAQ section */
        .faq-section {
            margin: 40px 0;
        }
        .faq-item {
            margin-bottom: 15px;
            border-bottom: 1px solid #eee;
            padding-bottom: 15px;
        }
        .faq-question {
            font-weight: bold;
            margin-bottom: 8px;
            color: #333;
        }
        
        /* Footer */
        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #eee;
            color: #666;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Banner Ad -->
        <div class="ad-container">
            <div class="ad-banner">Advertisement Space (728x90)</div>
        </div>
        
        <header>
            <h1>🚀 TikTok Video Downloader</h1>
            <p class="subtitle">Download TikTok videos without watermark in MP4 format</p>
        </header>

        <!-- Backup Section - Always Visible -->
        <div class="backup-section">
            <h3>🎯 Smart Download System</h3>
            <p>Our system automatically uses the best available method for fast and reliable downloads.</p>
            <div style="background: white; padding: 15px; border-radius: 8px; margin: 10px 0;">
                <strong>Priority Order:</strong>
                <ol style="margin: 10px 0; padding-left: 20px;">
                    <li>Cloudflare Worker (100K+ requests/day)</li>
                    <li>TikWM Direct API (10K requests/day)</li>
                </ol>
            </div>
        </div>

        <div class="api-test" id="apiTest">
            <h3>🔍 Server Status</h3>
            <div class="server-list" id="serverList"></div>
        </div>

        <section style="background: #f8f9fa; padding: 25px; border-radius: 15px; margin-bottom: 25px;">
            <label for="videoUrl" style="font-weight: bold; color: #333; display: block; margin-bottom: 10px;">Enter TikTok Video URL:</label>
            <input type="url" id="videoUrl" placeholder="https://www.tiktok.com/@username/video/1234567890" required
                   style="padding: 15px; border: 2px solid #ddd; border-radius: 10px; font-size: 1rem; width: 100%; margin-bottom: 10px;">
            
            <div id="errorMessage"></div>
            
            <button id="fetchBtn">
                <span>🚀 Download Video (Auto-Select Best Method)</span>
            </button>
        </section>

        <div id="loading">
            <div></div>
            <p id="loadingText">Downloading video...</p>
        </div>

        <section id="resultSection">
            <h2>✅ Video Downloaded Successfully!</h2>
            <div class="method-indicator" id="methodUsed">
                Downloaded via: <strong id="methodName">Cloudflare Worker</strong>
            </div>
            <video id="videoPreview" controls></video>
            <button id="downloadBtn">📥 Download Video</button>
        </section>

        <!-- Middle Banner Ad -->
        <div class="ad-container">
            <div class="ad-banner">Advertisement Space (728x90)</div>
        </div>

        <div style="background: #e8f5e8; padding: 20px; border-radius: 10px; margin-top: 20px;">
            <h3>✅ Available Download Methods:</h3>
            <ul style="margin: 15px 0; padding-left: 20px;">
                <li><strong>Cloudflare Worker</strong> - High Capacity <span class="status-badge status-active">Recommended</span></li>
                <li><strong>TikWM Direct API</strong> - Backup Method <span class="status-badge status-backup">Limited</span></li>
            </ul>
            <p style="color: #666; margin-top: 10px;">
                💡 <strong>Smart System:</strong> Our downloader automatically selects the best available method for each request, ensuring maximum reliability and speed.
            </p>
        </div>

        <!-- Features Section -->
        <div class="features">
            <div class="feature-card">
                <div class="feature-icon">⚡</div>
                <h3>Fast Download</h3>
                <p>Download TikTok videos quickly without any delays</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🔒</div>
                <h3>No Watermark</h3>
                <p>Get clean TikTok videos without any watermark</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">📱</div>
                <h3>Mobile Friendly</h3>
                <p>Works perfectly on all devices and browsers</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">🔄</div>
                <h3>Auto-Fallback</h3>
                <p>Automatically switches to backup methods if needed</p>
            </div>
        </div>

        <!-- FAQ Section -->
        <div class="faq-section">
            <h2 style="text-align: center; margin-bottom: 20px;">Frequently Asked Questions</h2>
            <div class="faq-item">
                <div class="faq-question">How to download TikTok videos without watermark?</div>
                <p>Simply paste the TikTok video URL in the input field above and click the download button. Our smart system will automatically use the best available method to download your video without watermark.</p>
            </div>
            <div class="faq-item">
                <div class="faq-question">Which download method is the best?</div>
                <p>Our system automatically selects the best method for you. Cloudflare Worker is our primary method (100,000+ requests daily), with TikWM as a reliable backup.</p>
            </div>
            <div class="faq-item">
                <div class="faq-question">Is this TikTok downloader free?</div>
                <p>Yes, our TikTok video downloader is completely free to use with no hidden costs or registration required.</p>
            </div>
            <div class="faq-item">
                <div class="faq-question">What if the download fails?</div>
                <p>Our system automatically tries multiple methods. If one fails, it immediately switches to the next available option for maximum reliability.</p>
            </div>
            <div class="faq-item">
                <div class="faq-question">Is it legal to download TikTok videos?</div>
                <p>Downloading TikTok videos for personal use is generally acceptable. However, you should respect copyright and not redistribute content without permission.</p>
            </div>
        </div>

        <footer>
            <p>© 2023 TikTok Video Downloader - Download TikTok Videos Without Watermark</p>
            <p style="margin-top: 10px; font-size: 0.9rem;">
                This tool helps you download TikTok videos in MP4 format. TikTok is a registered trademark of ByteDance Ltd.
                <br>Powered by smart auto-selection technology for maximum reliability.
            </p>
        </footer>
    </div>

    <script>
        // ====== TikTok Downloader with Auto Method Selection ======
        class TikTokDownloader {
            constructor() {
                this.currentVideo = null;
                this.workerURL = "https://tikmob.mohammedmila022.workers.dev/";
                this.downloadStats = {
                    totalDownloads: 0,
                    workerSuccess: 0,
                    tikwmSuccess: 0
                };
            }

            async downloadVideo(videoUrl) {
                this.downloadStats.totalDownloads++;
                
                // Try Cloudflare Worker first (Recommended)
                try {
                    console.log("🔄 Trying Cloudflare Worker (Primary)...");
                    const result = await this.tryWorker(videoUrl);
                    if (result.success) {
                        this.currentVideo = result.data;
                        this.downloadStats.workerSuccess++;
                        return {
                            ...result,
                            method: 'worker'
                        };
                    }
                } catch (error) {
                    console.log("❌ Worker failed:", error.message);
                }

                // If Worker fails, try TikWM
                try {
                    console.log("🔄 Trying TikWM (Backup)...");
                    const result = await this.tryTikWM(videoUrl);
                    if (result.success) {
                        this.currentVideo = result.data;
                        this.downloadStats.tikwmSuccess++;
                        return {
                            ...result,
                            method: 'tikwm'
                        };
                    }
                } catch (error) {
                    console.log("❌ TikWM failed:", error.message);
                }

                throw new Error('All download methods failed. Please try again later or use a different TikTok URL.');
            }

            async tryWorker(videoUrl) {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 15000);

                try {
                    const response = await fetch(`${this.workerURL}?url=${encodeURIComponent(videoUrl)}`, {
                        signal: controller.signal,
                        headers: {
                            'Accept': 'application/json',
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                        }
                    });

                    clearTimeout(timeout);

                    if (!response.ok) {
                        throw new Error(`Worker Error: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (data.success && data.data && data.data.videoUrl) {
                        return {
                            success: true,
                            data: data.data
                        };
                    } else if (data.apis) {
                        // If worker provides API instructions, use them
                        return await this.useWorkerInstructions(data.apis, videoUrl);
                    } else {
                        throw new Error('Worker: No video data received');
                    }

                } catch (error) {
                    clearTimeout(timeout);
                    throw error;
                }
            }

            async useWorkerInstructions(apis, videoUrl) {
                // Try APIs recommended by the worker
                for (const api of apis) {
                    try {
                        console.log(`Trying ${api.name} based on worker instructions...`);
                        const response = await fetch(api.url, {
                            method: api.method,
                            headers: {
                                'Content-Type': 'application/json',
                                'Accept': 'application/json',
                                'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                            },
                            body: JSON.stringify(api.body)
                        });

                        if (response.ok) {
                            const data = await response.json();
                            const result = this.parseResponse(api.name, data);
                            if (result.success) {
                                return result;
                            }
                        }
                    } catch (error) {
                        console.log(`${api.name} failed:`, error.message);
                        continue;
                    }
                }
                throw new Error('All Worker recommendations failed');
            }

            async tryTikWM(videoUrl) {
                const controller = new AbortController();
                const timeout = setTimeout(() => controller.abort(), 15000);

                try {
                    const response = await fetch('https://www.tikwm.com/api/', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'Accept': 'application/json',
                            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36'
                        },
                        body: JSON.stringify({ url: videoUrl }),
                        signal: controller.signal
                    });

                    clearTimeout(timeout);

                    if (!response.ok) {
                        throw new Error(`TikWM Error: ${response.status}`);
                    }

                    const data = await response.json();
                    
                    if (data.code === 0 && data.data && data.data.play) {
                        let videoUrl = data.data.play;
                        if (videoUrl && !videoUrl.startsWith('http')) {
                            videoUrl = 'https:' + videoUrl;
                        }
                        
                        return {
                            success: true,
                            data: {
                                videoUrl: videoUrl,
                                title: data.data.title || "TikTok Video",
                                author: data.data.author?.unique_id || "User",
                                duration: data.data.duration
                            }
                        };
                    } else if (data.msg) {
                        throw new Error(`TikWM: ${data.msg}`);
                    } else {
                        throw new Error('TikWM: Unknown error');
                    }

                } catch (error) {
                    clearTimeout(timeout);
                    throw error;
                }
            }

            parseResponse(apiName, data) {
                if (apiName === "TikWM" && data.code === 0 && data.data) {
                    let videoUrl = data.data.play;
                    if (videoUrl && !videoUrl.startsWith('http')) {
                        videoUrl = 'https:' + videoUrl;
                    }
                    return {
                        success: true,
                        data: {
                            videoUrl: videoUrl,
                            title: data.data.title || "TikTok Video",
                            author: data.data.author?.unique_id || "User"
                        }
                    };
                }
                return { success: false };
            }

            getStats() {
                return this.downloadStats;
            }
        }

        // ====== Server Status Check ======
        async function checkServers() {
            const serverList = document.getElementById('serverList');
            serverList.innerHTML = '';

            // Cloudflare Worker Status
            const workerItem = document.createElement('div');
            workerItem.className = 'server-item server-online';
            workerItem.innerHTML = `
                <strong>Cloudflare Worker</strong>
                <div style="color: var(--success);">✅ Primary Method</div>
                <div style="font-size: 0.8rem; color: #666;">100K+ requests/day</div>
                <div style="font-size: 0.7rem; color: #888;">Auto-selected first</div>
            `;
            serverList.appendChild(workerItem);

            // TikWM Status
            const tikwmItem = document.createElement('div');
            tikwmItem.className = 'server-item server-online';
            tikwmItem.innerHTML = `
                <strong>TikWM API</strong>
                <div style="color: var(--success);">✅ Backup Method</div>
                <div style="font-size: 0.8rem; color: #666;">10K requests/day</div>
                <div style="font-size: 0.7rem; color: #888;">Auto-fallback</div>
            `;
            serverList.appendChild(tikwmItem);

            const statusElement = document.querySelector('#apiTest h3');
            statusElement.innerHTML = `🔍 System Status: All Methods Available`;
        }

        // ====== Handle UI ======
        const downloader = new TikTokDownloader();
        const videoUrlInput = document.getElementById('videoUrl');
        const fetchBtn = document.getElementById('fetchBtn');
        const loading = document.getElementById('loading');
        const resultSection = document.getElementById('resultSection');
        const videoPreview = document.getElementById('videoPreview');
        const downloadBtn = document.getElementById('downloadBtn');
        const errorMessage = document.getElementById('errorMessage');
        const methodName = document.getElementById('methodName');
        const methodUsed = document.getElementById('methodUsed');

        function showError(msg) {
            errorMessage.innerHTML = `
                ${msg}
                <div style="margin-top: 10px; padding: 10px; background: #fff3cd; border-radius: 5px;">
                    <strong>💡 Tip:</strong> Try again in a few moments, or use a different TikTok URL.
                </div>
            `;
            errorMessage.style.display = 'block';
        }

        function hideError() {
            errorMessage.style.display = 'none';
        }

        function showLoading() {
            loading.style.display = 'block';
            resultSection.style.display = 'none';
            loadingText.textContent = "Connecting to download service...";
        }

        function hideLoading() {
            loading.style.display = 'none';
        }

        function updateLoadingText(text) {
            loadingText.textContent = text;
        }

        function isValidTikTokUrl(url) {
            const patterns = [
                /https?:\/\/(www\.)?tiktok\.com\/.+\/video\/\d+/,
                /https?:\/\/(vm|vt)\.tiktok\.com\/.+/,
                /https?:\/\/tiktok\.com\/@.+\/video\/\d+/
            ];
            return patterns.some(pattern => pattern.test(url));
        }

        fetchBtn.addEventListener('click', async () => {
            const url = videoUrlInput.value.trim();
            
            if (!url) {
                showError('Please enter a TikTok video URL');
                return;
            }
            
            if (!isValidTikTokUrl(url)) {
                showError('Please enter a valid TikTok URL. Supported formats:<br>• https://www.tiktok.com/@username/video/1234567890<br>• https://vm.tiktok.com/ABCDEFG/');
                return;
            }
            
            hideError();
            showLoading();
            fetchBtn.disabled = true;
            
            try {
                updateLoadingText("Trying Cloudflare Worker...");
                const result = await downloader.downloadVideo(url);
                
                videoPreview.src = result.data.videoUrl;
                
                // Show which method was used
                if (result.method === 'worker') {
                    methodName.textContent = 'Cloudflare Worker (Primary)';
                    methodUsed.style.background = '#e8f5e8';
                } else {
                    methodName.textContent = 'TikWM API (Backup)';
                    methodUsed.style.background = '#fff3cd';
                }
                
                hideLoading();
                resultSection.style.display = 'block';
                
                // Update SEO
                document.title = `Downloaded: ${result.data.title || "TikTok Video"} | TikTok Video Downloader`;
                
                const metaDescription = document.querySelector('meta[name="description"]');
                if (metaDescription && result.data.title) {
                    metaDescription.content = `Download "${result.data.title}" TikTok video without watermark in MP4 format. Free TikTok video downloader.`;
                }
                
            } catch (error) {
                hideLoading();
                showError(error.message);
            } finally {
                fetchBtn.disabled = false;
            }
        });

        downloadBtn.addEventListener('click', () => {
            if (downloader.currentVideo) {
                const a = document.createElement('a');
                a.href = downloader.currentVideo.videoUrl;
                a.download = 'tiktok-video.mp4';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
            }
        });

        // ====== Initialize Page ======
        document.addEventListener('DOMContentLoaded', () => {
            checkServers();
            
            // Allow Enter key to submit
            videoUrlInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    fetchBtn.click();
                }
            });
            
            // Focus on input field
            videoUrlInput.focus();
            
            // Update loading text element
            window.loadingText = document.getElementById('loadingText');
        });
    </script>
</body>
</html>
