<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<title>فحص خوادم TikTok Downloader</title>
<style>
  body {
    background: #0f1115;
    color: #fff;
    font-family: "Tajawal", sans-serif;
    text-align: center;
    padding: 30px;
  }
  h1 {
    color: #00f3ff;
    margin-bottom: 10px;
  }
  .server {
    background: #1b1e24;
    border-radius: 12px;
    padding: 10px 20px;
    margin: 10px auto;
    width: 350px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: 0.3s;
  }
  .server.active { border: 2px solid #00ff7f; }
  .server.inactive { border: 2px solid #ff5050; }
  .server span.status {
    font-weight: bold;
  }
  .server span.active {
    color: #00ff7f;
  }
  .server span.inactive {
    color: #ff5050;
  }
</style>
</head>
<body>

<h1>✅ حالة خوادم TikTok Downloader</h1>
<div id="status">جاري فحص الخوادم...</div>
<div id="servers"></div>

<script>
const RELIABLE_APIS = [
  { name: "TikMob Worker", testUrl: "https://tikmob.mohammedmila022.workers.dev/", working: false },
  { name: "TikTok API Direct", testUrl: "https://api.tiktokv.com", working: false },
  { name: "TikDown", testUrl: "https://tikdown.org", working: false },
  { name: "TikWM", testUrl: "https://www.tikwm.com", working: false },
  { name: "SnapTik", testUrl: "https://snaptik.app", working: false },
  { name: "TikMate", testUrl: "https://www.tikmate.cc", working: false },
  { name: "SaveTik", testUrl: "https://api.savetik.app", working: false },
  { name: "Snapsave", testUrl: "https://snapsave.io", working: false },
  { name: "TTDownloader", testUrl: "https://ttdownloader.com", working: false },
  { name: "MusicalDown", testUrl: "https://musicaldown.com", working: false },
  { name: "TTDownloader.Pro", testUrl: "https://ttdownloader.pro", working: false },
  { name: "SSSTik.io", testUrl: "https://ssstik.io", working: false },
];


async function checkServers() {
  let activeCount = 0;

  await Promise.all(RELIABLE_APIS.map(async (api) => {
    try {
      const controller = new AbortController();
      const timeout = setTimeout(() => controller.abort(), 5000);
      const res = await fetch(api.testUrl, { method: "HEAD", signal: controller.signal });
      clearTimeout(timeout);
      if (res.ok) {
        api.working = true;
        activeCount++;
      }
    } catch (e) {
      api.working = false;
    }
  }));

  // ترتيب حسب الحالة (النشطة أولاً)
  RELIABLE_APIS.sort((a, b) => b.working - a.working);

  const container = document.getElementById("servers");
  container.innerHTML = "";
  RELIABLE_APIS.forEach(api => {
    const div = document.createElement("div");
    div.className = "server " + (api.working ? "active" : "inactive");
    div.innerHTML = `<span>${api.name}</span> <span class="status ${api.working ? "active" : "inactive"}">${api.working ? "✅ متصل" : "❌ غير متاح"}</span>`;
    container.appendChild(div);
  });

  document.getElementById("status").innerHTML = `✅ حالة الخوادم: ${activeCount}/${RELIABLE_APIS.length} نشط`;
}

checkServers();
</script>

</body>
</html>
